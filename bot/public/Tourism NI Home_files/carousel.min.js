(function(a){a.flexslider=function(d,i){var k=a(d),m=a.extend({},a.flexslider.defaults,i),h=m.namespace,l=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,e=(l)?"touchend":"click",n=m.direction==="vertical",j=m.reverse,c=(m.itemWidth>0),f=m.animation==="fade",b=m.asNavFor!=="",g={};a.data(d,"flexslider",k);g={init:function(){k.animating=false;k.currentSlide=m.startAt;k.animatingTo=k.currentSlide;k.atEnd=(k.currentSlide===0||k.currentSlide===k.last);k.containerSelector=m.selector.substr(0,m.selector.search(" "));k.slides=a(m.selector,k);k.container=a(k.containerSelector,k);k.count=k.slides.length;k.syncExists=a(m.sync).length>0;if(m.animation==="slide"){m.animation="swing"}k.prop=(n)?"top":"marginLeft";k.args={};k.manualPause=false;k.transitions=!m.video&&!f&&m.useCSS&&(function(){var p=document.createElement("div"),q=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var o in q){if(p.style[q[o]]!==undefined){k.pfx=q[o].replace("Perspective","").toLowerCase();k.prop="-"+k.pfx+"-transform";return true}}return false}());if(m.controlsContainer!==""){k.controlsContainer=a(m.controlsContainer).length>0&&a(m.controlsContainer)}if(m.manualControls!==""){k.manualControls=a(m.manualControls).length>0&&a(m.manualControls)}if(m.randomize){k.slides.sort(function(){return(Math.round(Math.random())-0.5)});k.container.empty().append(k.slides)}k.doMath();if(b){g.asNav.setup()}k.setup("init");if(m.controlNav){g.controlNav.setup()}if(m.directionNav){g.directionNav.setup()}if(m.keyboard&&(a(k.containerSelector).length===1||m.multipleKeyboard)){a(document).bind("keyup",function(o){var p=o.keyCode;if(!k.animating&&(p===39||p===37)){var q=(p===39)?k.getTarget("next"):(p===37)?k.getTarget("prev"):false;k.flexAnimate(q,m.pauseOnAction)}})}if(m.mousewheel){k.bind("mousewheel",function(r,o,p,q){r.preventDefault();var s=(o<0)?k.getTarget("next"):k.getTarget("prev");k.flexAnimate(s,m.pauseOnAction)})}if(m.pausePlay){g.pausePlay.setup()}if(m.slideshow){if(m.pauseOnHover){k.hover(function(){k.pause()},function(){if(!k.manualPause){k.play()}})}(m.initDelay>0)?setTimeout(k.play,m.initDelay):k.play()}if(l&&m.touch){g.touch()}if(!f||(f&&m.smoothHeight)){a(window).bind("resize focus",g.resize)}setTimeout(function(){m.start(k)},200)},asNav:{setup:function(){k.asNav=true;k.animatingTo=Math.floor(k.currentSlide/k.move);k.currentItem=k.currentSlide;k.slides.removeClass(h+"active-slide").eq(k.currentItem).addClass(h+"active-slide");k.slides.click(function(p){p.preventDefault();var o=a(this),q=o.index();if(!a(m.asNavFor).data("flexslider").animating&&!o.hasClass("active")){k.direction=(k.currentItem<q)?"next":"prev";k.flexAnimate(q,m.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!k.manualControls){g.controlNav.setupPaging()}else{g.controlNav.setupManual()}},setupPaging:function(){var r=(m.controlNav==="thumbnails")?"control-thumbs":"control-paging",q=1,p;k.controlNavScaffold=a('<ol class="'+h+"control-nav "+h+r+'"></ol>');if(k.pagingCount>1){for(var o=0;o<k.pagingCount;o++){p=(m.controlNav==="thumbnails")?'<img src="'+k.slides.eq(o).attr("data-thumb")+'"/>':"<a>"+q+"</a>";k.controlNavScaffold.append("<li>"+p+"</li>");q++}}(k.controlsContainer)?a(k.controlsContainer).append(k.controlNavScaffold):k.append(k.controlNavScaffold);g.controlNav.set();g.controlNav.active();k.controlNavScaffold.delegate("a, img",e,function(t){t.preventDefault();var s=a(this),u=k.controlNav.index(s);if(!s.hasClass(h+"active")){k.direction=(u>k.currentSlide)?"next":"prev";k.flexAnimate(u,m.pauseOnAction)}});if(l){k.controlNavScaffold.delegate("a","click touchstart",function(s){s.preventDefault()})}},setupManual:function(){k.controlNav=k.manualControls;g.controlNav.active();k.controlNav.live(e,function(p){p.preventDefault();var o=a(this),q=k.controlNav.index(o);if(!o.hasClass(h+"active")){(q>k.currentSlide)?k.direction="next":k.direction="prev";k.flexAnimate(q,m.pauseOnAction)}});if(l){k.controlNav.live("click touchstart",function(o){o.preventDefault()})}},set:function(){var o=(m.controlNav==="thumbnails")?"img":"a";k.controlNav=a("."+h+"control-nav li "+o,(k.controlsContainer)?k.controlsContainer:k)},active:function(){k.controlNav.removeClass(h+"active").eq(k.animatingTo).addClass(h+"active")},update:function(o,p){if(k.pagingCount>1&&o==="add"){k.controlNavScaffold.append(a("<li><a>"+k.count+"</a></li>"))}else{if(k.pagingCount===1){k.controlNavScaffold.find("li").remove()}else{k.controlNav.eq(p).closest("li").remove()}}g.controlNav.set();(k.pagingCount>1&&k.pagingCount!==k.controlNav.length)?k.update(p,o):g.controlNav.active()}},directionNav:{setup:function(){var o=a('<ul class="'+h+'direction-nav"><li><a class="'+h+'prev" href="#">'+m.prevText+'</a></li><li><a class="'+h+'next" href="#">'+m.nextText+"</a></li></ul>");if(k.controlsContainer){a(k.controlsContainer).append(o);k.directionNav=a("."+h+"direction-nav li a",k.controlsContainer)}else{k.append(o);k.directionNav=a("."+h+"direction-nav li a",k)}g.directionNav.update();k.directionNav.bind(e,function(p){p.preventDefault();var q=(a(this).hasClass(h+"next"))?k.getTarget("next"):k.getTarget("prev");k.flexAnimate(q,m.pauseOnAction)});if(l){k.directionNav.bind("click touchstart",function(p){p.preventDefault()})}},update:function(){var o=h+"disabled";if(!m.animationLoop){if(k.pagingCount===1){k.directionNav.addClass(o)}else{if(k.animatingTo===0){k.directionNav.removeClass(o).filter("."+h+"prev").addClass(o)}else{if(k.animatingTo===k.last){k.directionNav.removeClass(o).filter("."+h+"next").addClass(o)}else{k.directionNav.removeClass(o)}}}}}},pausePlay:{setup:function(){var o=a('<div class="'+h+'pauseplay"><a></a></div>');if(k.controlsContainer){k.controlsContainer.append(o);k.pausePlay=a("."+h+"pauseplay a",k.controlsContainer)}else{k.append(o);k.pausePlay=a("."+h+"pauseplay a",k)}g.pausePlay.update((m.slideshow)?h+"pause":h+"play");k.pausePlay.bind(e,function(p){p.preventDefault();if(a(this).hasClass(h+"pause")){k.pause();k.manualPause=true}else{k.play();k.manualPause=false}});if(l){k.pausePlay.bind("click touchstart",function(p){p.preventDefault()})}},update:function(o){(o==="play")?k.pausePlay.removeClass(h+"pause").addClass(h+"play").text(m.playText):k.pausePlay.removeClass(h+"play").addClass(h+"pause").text(m.pauseText)}},touch:function(){var w,x,q,o,p,v,u=false;d.addEventListener("touchstart",t,false);function t(y){if(k.animating){y.preventDefault()}else{if(y.touches.length===1){k.pause();o=(n)?k.h:k.w;v=Number(new Date());q=(c&&j&&k.animatingTo===k.last)?0:(c&&j)?k.limit-(((k.itemW+m.itemMargin)*k.move)*k.animatingTo):(c&&k.currentSlide===k.last)?k.limit:(c)?((k.itemW+m.itemMargin)*k.move)*k.currentSlide:(j)?(k.last-k.currentSlide+k.cloneOffset)*o:(k.currentSlide+k.cloneOffset)*o;w=(n)?y.touches[0].pageY:y.touches[0].pageX;x=(n)?y.touches[0].pageX:y.touches[0].pageY;d.addEventListener("touchmove",s,false);d.addEventListener("touchend",r,false)}}}function s(y){p=(n)?w-y.touches[0].pageY:w-y.touches[0].pageX;u=(n)?(Math.abs(p)<Math.abs(y.touches[0].pageX-x)):(Math.abs(p)<Math.abs(y.touches[0].pageY-x));if(!u||Number(new Date())-v>500){y.preventDefault();if(!f&&k.transitions){if(!m.animationLoop){p=p/((k.currentSlide===0&&p<0||k.currentSlide===k.last&&p>0)?(Math.abs(p)/o+2):1)}k.setProps(q+p,"setTouch")}}}function r(y){if(k.animatingTo===k.currentSlide&&!u&&!(p===null)){var A=(j)?-p:p,z=(A>0)?k.getTarget("next"):k.getTarget("prev");if(k.canAdvance(z)&&(Number(new Date())-v<550&&Math.abs(A)>20||Math.abs(A)>o/2)){k.flexAnimate(z,m.pauseOnAction)}else{k.flexAnimate(k.currentSlide,m.pauseOnAction,true)}}d.removeEventListener("touchmove",s,false);d.removeEventListener("touchend",r,false);w=null;x=null;p=null;q=null}},resize:function(){if(!k.animating&&k.is(":visible")){if(!c){k.doMath()}if(f){g.smoothHeight()}else{if(c){k.slides.width(k.computedW);k.update(k.pagingCount);k.setProps()}else{if(n){k.viewport.height(k.h);k.setProps(k.h,"setTotal")}else{if(m.smoothHeight){g.smoothHeight()}k.newSlides.width(k.computedW);k.setProps(k.computedW,"setTotal")}}}}},smoothHeight:function(p){if(!n||f){var o=(f)?k:k.viewport;(p)?o.animate({height:k.slides.eq(k.animatingTo).height()},p):o.height(k.slides.eq(k.animatingTo).height())}},sync:function(p){var o=a(m.sync).data("flexslider"),q=k.animatingTo;switch(p){case"animate":o.flexAnimate(q,m.pauseOnAction,false,true);break;case"play":if(!o.playing&&!o.asNav){o.play()}break;case"pause":o.pause();break}}};k.flexAnimate=function(w,u,t,x,q){if(!k.animating&&(k.canAdvance(w)||t)&&k.is(":visible")){if(b&&x){var s=a(m.asNavFor).data("flexslider");k.atEnd=w===0||w===k.count-1;s.flexAnimate(w,true,false,true,q);k.direction=(k.currentItem<w)?"next":"prev";s.direction=k.direction;if(Math.ceil((w+1)/k.visible)-1!==k.currentSlide&&w!==0){k.currentItem=w;k.slides.removeClass(h+"active-slide").eq(w).addClass(h+"active-slide");w=Math.floor(w/k.visible)}else{k.currentItem=w;k.slides.removeClass(h+"active-slide").eq(w).addClass(h+"active-slide");return false}}k.animating=true;k.animatingTo=w;m.before(k);if(u){k.pause()}if(k.syncExists&&!q){g.sync("animate")}if(m.controlNav){g.controlNav.active()}if(!c){k.slides.removeClass(h+"active-slide").eq(w).addClass(h+"active-slide")}k.atEnd=w===0||w===k.last;if(m.directionNav){g.directionNav.update()}if(w===k.last){m.end(k);if(!m.animationLoop){k.pause()}}if(!f){var p=(n)?k.slides.filter(":first").height():k.computedW,r,v,o;if(c){r=(m.itemWidth>k.w)?m.itemMargin*2:m.itemMargin;o=((k.itemW+r)*k.move)*k.animatingTo;v=(o>k.limit&&k.visible!==1)?k.limit:o}else{if(k.currentSlide===0&&w===k.count-1&&m.animationLoop&&k.direction!=="next"){v=(j)?(k.count+k.cloneOffset)*p:0}else{if(k.currentSlide===k.last&&w===0&&m.animationLoop&&k.direction!=="prev"){v=(j)?0:(k.count+1)*p}else{v=(j)?((k.count-1)-w+k.cloneOffset)*p:(w+k.cloneOffset)*p}}}k.setProps(v,"",m.animationSpeed);if(k.transitions){if(!m.animationLoop||!k.atEnd){k.animating=false;k.currentSlide=k.animatingTo}k.container.unbind("webkitTransitionEnd transitionend");k.container.bind("webkitTransitionEnd transitionend",function(){k.wrapup(p)})}else{k.container.animate(k.args,m.animationSpeed,m.easing,function(){k.wrapup(p)})}}else{k.slides.eq(k.currentSlide).fadeOut(m.animationSpeed,m.easing);k.slides.eq(w).fadeIn(m.animationSpeed,m.easing,k.wrapup)}if(m.smoothHeight){g.smoothHeight(m.animationSpeed)}}};k.wrapup=function(o){if(!f&&!c){if(k.currentSlide===0&&k.animatingTo===k.last&&m.animationLoop){k.setProps(o,"jumpEnd")}else{if(k.currentSlide===k.last&&k.animatingTo===0&&m.animationLoop){k.setProps(o,"jumpStart")}}}k.animating=false;k.currentSlide=k.animatingTo;m.after(k)};k.animateSlides=function(){if(!k.animating){k.flexAnimate(k.getTarget("next"))}};k.pause=function(){clearInterval(k.animatedSlides);k.playing=false;if(m.pausePlay){g.pausePlay.update("play")}if(k.syncExists){g.sync("pause")}};k.play=function(){k.animatedSlides=setInterval(k.animateSlides,m.slideshowSpeed);k.playing=true;if(m.pausePlay){g.pausePlay.update("pause")}if(k.syncExists){g.sync("play")}};k.canAdvance=function(p){var o=(b)?k.pagingCount-1:k.last;return(b&&k.currentItem===0&&p===k.pagingCount-1&&k.direction!=="next")?false:(p===k.currentSlide&&!b)?false:(m.animationLoop)?true:(k.atEnd&&k.currentSlide===0&&p===o&&k.direction!=="next")?false:(k.atEnd&&k.currentSlide===o&&p===0&&k.direction==="next")?false:true};k.getTarget=function(o){k.direction=o;if(o==="next"){return(k.currentSlide===k.last)?0:k.currentSlide+1}else{return(k.currentSlide===0)?k.last:k.currentSlide-1}};k.setProps=function(p,q,o){var r=(function(){var t=(p)?p:((k.itemW+m.itemMargin)*k.move)*k.animatingTo,s=(function(){if(c){return(q==="setTouch")?p:(j&&k.animatingTo===k.last)?0:(j)?k.limit-(((k.itemW+m.itemMargin)*k.move)*k.animatingTo):(k.animatingTo===k.last)?k.limit:t}else{switch(q){case"setTotal":return(j)?((k.count-1)-k.currentSlide+k.cloneOffset)*p:(k.currentSlide+k.cloneOffset)*p;case"setTouch":return(j)?p:p;case"jumpEnd":return(j)?p:k.count*p;case"jumpStart":return(j)?k.count*p:p;default:return p}}}());return(s*-1)+"px"}());if(k.transitions){r=(n)?"translate3d(0,"+r+",0)":"translate3d("+r+",0,0)";o=(o!==undefined)?(o/1000)+"s":"0s";k.container.css("-"+k.pfx+"-transition-duration",o)}k.args[k.prop]=r;if(k.transitions||o===undefined){k.container.css(k.args)}};k.setup=function(q){if(!f){var p,o;if(q==="init"){k.viewport=a('<div class="flex-viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(k).append(k.container);k.cloneCount=0;k.cloneOffset=0;if(j){o=a.makeArray(k.slides).reverse();k.slides=a(o);k.container.empty().append(k.slides)}}if(m.animationLoop&&!c){k.cloneCount=2;k.cloneOffset=1;if(q!=="init"){k.container.find(".clone").remove()}k.container.append(k.slides.first().clone().addClass("clone")).prepend(k.slides.last().clone().addClass("clone"))}k.newSlides=a(m.selector,k);p=(j)?k.count-1-k.currentSlide+k.cloneOffset:k.currentSlide+k.cloneOffset;if(n&&!c){k.container.height((k.count+k.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){k.newSlides.css({display:"block"});k.doMath();k.viewport.height(k.h);k.setProps(p*k.h,"init")},(q==="init")?100:0)}else{k.container.width((k.count+k.cloneCount)*200+"%");k.setProps(p*k.computedW,"init");setTimeout(function(){k.doMath();k.newSlides.css({width:k.computedW,"float":"left",display:"block"});if(m.smoothHeight){g.smoothHeight()}},(q==="init")?100:0)}}else{k.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(q==="init"){k.slides.eq(k.currentSlide).fadeIn(m.animationSpeed,m.easing)}if(m.smoothHeight){g.smoothHeight()}}if(!c){k.slides.removeClass(h+"active-slide").eq(k.currentSlide).addClass(h+"active-slide")}};k.doMath=function(){var q=k.slides.first(),r=m.itemMargin,p=m.minItems,o=m.maxItems;k.w=k.width();k.h=q.height();k.boxPadding=q.outerWidth()-q.width();if(c){k.itemT=m.itemWidth+r;k.minW=(p)?p*k.itemT:k.w;k.maxW=(o)?o*k.itemT:k.w;k.itemW=(k.minW>k.w)?(k.w-(r*p))/p:(k.maxW<k.w)?(k.w-(r*o))/o:(m.itemWidth>k.w)?k.w:m.itemWidth;k.visible=Math.floor(k.w/(k.itemW+r));k.move=(m.move>0&&m.move<k.visible)?m.move:k.visible;k.pagingCount=Math.ceil(((k.count-k.visible)/k.move)+1);k.last=k.pagingCount-1;k.limit=(k.pagingCount===1)?0:(m.itemWidth>k.w)?((k.itemW+(r*2))*k.count)-k.w-r:((k.itemW+r)*k.count)-k.w}else{k.itemW=k.w;k.pagingCount=k.count;k.last=k.count-1}k.computedW=k.itemW-k.boxPadding};k.update=function(p,o){k.doMath();if(!c){if(p<k.currentSlide){k.currentSlide+=1}else{if(p<=k.currentSlide&&p!==0){k.currentSlide-=1}}k.animatingTo=k.currentSlide}if(m.controlNav&&!k.manualControls){if((o==="add"&&!c)||k.pagingCount>k.controlNav.length){g.controlNav.update("add")}else{if((o==="remove"&&!c)||k.pagingCount<k.controlNav.length){if(c&&k.currentSlide>k.last){k.currentSlide-=1;k.animatingTo-=1}g.controlNav.update("remove",k.last)}}}if(m.directionNav){g.directionNav.update()}};k.addSlide=function(p,q){var o=a(p);k.count+=1;k.last=k.count-1;if(n&&j){(q!==undefined)?k.slides.eq(k.count-q).after(o):k.container.prepend(o)}else{(q!==undefined)?k.slides.eq(q).before(o):k.container.append(o)}k.update(q,"add");k.slides=a(m.selector+":not(.clone)",k);k.setup();m.added(k)};k.removeSlide=function(o){var p=(isNaN(o))?k.slides.index(a(o)):o;k.count-=1;k.last=k.count-1;if(isNaN(o)){a(o,k.slides).remove()}else{(n&&j)?k.slides.eq(k.last).remove():k.slides.eq(o).remove()}k.doMath();k.update(p,"remove");k.slides=a(m.selector+":not(.clone)",k);k.setup();m.removed(k)};g.init()};a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"slide",easing:"linear",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:3000,animationSpeed:700,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:true,controlNav:false,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};a.fn.flexslider=function(c){c=c||{};if(typeof c==="object"){return this.each(function(){var e=a(this),f=(c.selector)?c.selector:".slides > li",d=e.find(f);if(d.length===1){d.fadeIn(400);if(c.start){c.start(e)}}else{if(e.data("flexslider")===undefined){new a.flexslider(this,c)}}})}else{var b=a(this).data("flexslider");switch(c){case"play":b.play();break;case"pause":b.pause();break;case"next":b.flexAnimate(b.getTarget("next"),true);break;case"prev":case"previous":b.flexAnimate(b.getTarget("prev"),true);break;default:if(typeof c==="number"){b.flexAnimate(c,true)}}}}})(jQuery);